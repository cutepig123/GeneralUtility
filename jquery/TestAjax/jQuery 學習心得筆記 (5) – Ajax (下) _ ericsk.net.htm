<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 7) | !(IE 8)  ]><!-->
<html lang="en-US"><!--<![endif]--><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>jQuery 學習心得筆記 (5) – Ajax (下) | ericsk.net</title>
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="http://blog.ericsk.org/xmlrpc.php">
	<!--[if lt IE 9]>
	<script src="http://blog.ericsk.org/wp-content/themes/twentythirteen/js/html5.js"></script>
	<![endif]-->
	<link rel="alternate" type="application/rss+xml" title="ericsk.net » Feed" href="http://blog.ericsk.org/feed">
<link rel="alternate" type="application/rss+xml" title="ericsk.net » Comments Feed" href="http://blog.ericsk.org/comments/feed">
<link rel="alternate" type="application/rss+xml" title="ericsk.net » jQuery 學習心得筆記 (5) – Ajax (下) Comments Feed" href="http://blog.ericsk.org/archives/839/feed">
<link rel="stylesheet" id="jetpack-widgets-css" href="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/widgets.css" type="text/css" media="all">
<link rel="stylesheet" id="twentythirteen-fonts-css" href="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/css.css" type="text/css" media="all">
<link rel="stylesheet" id="genericons-css" href="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/genericons.css" type="text/css" media="all">
<link rel="stylesheet" id="twentythirteen-style-css" href="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/style.css" type="text/css" media="all">
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentythirteen-ie-css'  href='http://blog.ericsk.org/wp-content/themes/twentythirteen/css/ie.css?ver=2013-07-18' type='text/css' media='all' />
<![endif]-->
<script src="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/839.htm" async=""></script><script type="text/javascript" async="" src="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/quant.js"></script><script src="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/ga.js" async="" type="text/javascript"></script><script type="text/javascript" src="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/jquery.js"></script>
<script type="text/javascript" src="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/jquery-migrate.js"></script>
<script type="text/javascript" src="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/comment-reply.js"></script>
<script type="text/javascript" src="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/external-tracking.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://blog.ericsk.org/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://blog.ericsk.org/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="jQuery 學習心得筆記 (4) – Ajax (上)" href="http://blog.ericsk.org/archives/838">
<link rel="next" title="收到 NetBeans 6.0 的光碟" href="http://blog.ericsk.org/archives/840">
<meta name="generator" content="WordPress 3.7.1">
<link rel="canonical" href="http://blog.ericsk.org/archives/839">
<link rel="shortlink" href="http://wp.me/p4vFJ-dx">

<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article">
<meta property="og:title" content="jQuery 學習心得筆記 (5) - Ajax (下)">
<meta property="og:url" content="http://blog.ericsk.org/archives/839">
<meta property="og:description" content="不再讓「下集」拖稿了... jQuery.ajax() 的 callback jQuery 提供的 ajax 函式其中有 4 個 callbacks: beforeSend, complete, error, 以及 success，當一個 Ajax request 送出到完成，會依照： beforeSend » success or error » complete ...">
<meta property="og:site_name" content="ericsk.net">
<meta property="og:image" content="spinner.gif">
<meta name="twitter:site" content="@jetpack">
<meta name="twitter:image" content="://spinner.gif?w=240">
<meta name="twitter:card" content="summary">
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
	<style type="text/css" id="twentythirteen-header-css">
			.site-header {
			background: url(http://blog.ericsk.org/wp-content/themes/twentythirteen/images/headers/diamond.png) no-repeat scroll top;
			background-size: 1600px auto;
		}
		</style>
	<!-- Google Analytics Tracking by Google Analyticator 6.4.5: http://www.videousermanuals.com/google-analyticator/ -->
<script type="text/javascript">
	var analyticsFileTypes = [''];
	var analyticsEventTracking = 'enabled';
</script>
<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-118317-4']);
        _gaq.push(['_addDevId', 'i9k95']); // Google Analyticator App ID with Google 
        
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
<script src="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/embed.js" async="" type="text/javascript"></script><script src="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/count.js" type="text/javascript" async=""></script><script defer="defer" src="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/sf_main.htm"></script><link rel="stylesheet" type="text/css" id="gravatar-card-css" href="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/hovercard.css"><link rel="stylesheet" type="text/css" id="gravatar-card-services-css" href="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/services.css"><script src="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/sf_preloader.jsp" type="text/javascript"></script><script src="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/sf_code.jsp" type="text/javascript"></script><script src="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/base_single_icon.js" type="text/javascript"></script></head>

<body class="single single-post postid-839 single-format-standard single-author">
	<div id="page" class="hfeed site">
		<header id="masthead" class="site-header" role="banner">
			<a class="home-link" href="http://blog.ericsk.org/" title="ericsk.net" rel="home">
				<h1 class="site-title">ericsk.net</h1>
				<h2 class="site-description">All about Eric</h2>
			</a>

			<div id="navbar" class="navbar">
				<nav id="site-navigation" class="navigation main-navigation" role="navigation">
					<h3 style="display: none;" class="menu-toggle">Menu</h3>
					<a class="screen-reader-text skip-link" href="#content" title="Skip to content">Skip to content</a>
					<div class="nav-menu"></div>
					<form role="search" method="get" class="search-form" action="http://blog.ericsk.org/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input class="search-field" placeholder="Search …" name="s" title="Search for:" type="search">
				</label>
				<input class="search-submit" value="Search" type="submit">
			</form>				</nav><!-- #site-navigation -->
			</div><!-- #navbar -->
		</header><!-- #masthead -->

		<div id="main" class="site-main">

	<div id="primary" class="content-area">
		<div id="content" class="site-content" role="main">

						
				
<article id="post-839" class="post-839 post type-post status-publish format-standard hentry category-programming category-computer-science tag-ajax tag-javascript tag-jquery tag-jquery-tut">
	<header class="entry-header">
		
				<h1 class="entry-title">jQuery 學習心得筆記 (5) – Ajax (下)</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="http://blog.ericsk.org/archives/839" title="Permalink to jQuery 學習心得筆記 (5) – Ajax (下)" rel="bookmark"><time class="entry-date" datetime="2008-01-09T14:01:30+00:00">January 9, 2008</time></a></span><span class="categories-links"><a href="http://blog.ericsk.org/archives/category/programming" title="View all posts in 程式設計" rel="category tag">程式設計</a>, <a href="http://blog.ericsk.org/archives/category/computer-science" title="View all posts in 資訊科學" rel="category tag">資訊科學</a></span><span class="tags-links"><a href="http://blog.ericsk.org/archives/tag/ajax" rel="tag">ajax</a>, <a href="http://blog.ericsk.org/archives/tag/javascript" rel="tag">javascript</a>, <a href="http://blog.ericsk.org/archives/tag/jquery" rel="tag">jquery</a>, <a href="http://blog.ericsk.org/archives/tag/jquery-tut" rel="tag">jquery-tut</a></span><span class="author vcard"><a class="url fn n" href="http://blog.ericsk.org/archives/author/ericsk" title="View all posts by ericsk" rel="author">ericsk</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>不再讓「下集」拖稿了…</p>
<p><span id="more-839"></span></p>
<h4>jQuery.ajax() 的 callback</h4>
<p>jQuery 提供的 ajax 函式其中有 4 個 callbacks: <code>beforeSend</code>, <code>complete</code>, <code>error</code>, 以及 <code>success</code>，當一個 Ajax request 送出到完成，會依照：</p>
<blockquote><p>beforeSend » success or error » complete</p></blockquote>
<p>這樣的順序來呼叫你所定義的 callback 函式，也就是不管成功或者失敗，<code>beforeSend</code> 及 <code>complete</code> 定義的 callbacks 都會被呼叫到，而 <code>success</code> 或 <code>error</code> 的 callback 則是視 Ajax request 的成敗來決定誰會被呼叫。</p>
<p>另外值得一提的是，jQuery 1.2 開始加入 JSONP 的支援，當你的 <code>dataType</code> 設成 jsonp 的時候，jQuery 的 ajax 函式會將 <code>dataType</code> 改為 script 並且多送一個 callback 參數到 server，然後 server 可以利用 callback 參數的值來輸出適當的 script 送回給 browser 來執行，也許這樣講很抽象，直接來看之前的例子改成 JSONP 的作法：</p>
<p>msg.php<br>
</p><pre><code>
&lt;?php
&nbsp;&nbsp;$res = "Hello, ";

&nbsp;&nbsp;if (!strcmp($_GET['gender'], "Male")) {
&nbsp;&nbsp;&nbsp;&nbsp;$res .= "Mr. ";
&nbsp;&nbsp;} else {
&nbsp;&nbsp;&nbsp;&nbsp;$res .= "Miss ";
&nbsp;&nbsp;}

&nbsp;&nbsp;$res .= $_GET['name'];

&nbsp;&nbsp;echo $_GET['callback']."({msg: '$res'});";
?&gt;
</code></pre><p></p>
<p>然後 JavaScript 的部份改成：</p>
<p></p><pre><code>
function processData(data) {
&nbsp;&nbsp;$('#msg').html(data.msg);
&nbsp;&nbsp;$('#msg').fadeIn();
&nbsp;&nbsp;setTimeout(function(){
&nbsp;&nbsp;&nbsp;&nbsp;$('#msg').fadeOut();
&nbsp;&nbsp;&nbsp;&nbsp;$(e.target).attr('disabled', false);
&nbsp;&nbsp;}, 3000);
}

function showMsg(e) {
&nbsp;&nbsp;$(e.target).attr('disabled', true);
&nbsp;&nbsp;$.ajax({
&nbsp;&nbsp;&nbsp;&nbsp;url: 'msg.php',
&nbsp;&nbsp;&nbsp;&nbsp;dataType: 'jsonp',
&nbsp;&nbsp;&nbsp;&nbsp;jsonp: 'processData',
&nbsp;&nbsp;&nbsp;&nbsp;data: {gender: $('#gender').val(), name: $('#name').val(), callback: 'processData'},
&nbsp;&nbsp;&nbsp;&nbsp;error: function(xhr) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert('Ajax request 發生錯誤');
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$(e.target).attr('disabled', false);
&nbsp;&nbsp;&nbsp;&nbsp;}
}
</code></pre><p></p>
<p>先看 msg.php 最後的輸出，其實是根據 callback 參數的值來決定，以這個例子而言可能就會輸出</p>
<p><code>processData({msg: 'Hello, Mr. XXX'});</code></p>
<p>所以 jQuery 會自動幫你把 <code>dataType</code> 設成 script 好讓 browser 認得要執行，這樣就不會去呼叫 <code>success</code> 或 <code>complete</code> 的 callback ，而是去呼叫你自己定義的 callback function 。</p>
<p>JSONP 的應用愈來愈多，像是 Google Calendar API 或是 twitter API 都有用到 JSONP，如果想了解更深入一點，可以參考<a href="http://bob.pythonmac.org/archives/2005/12/05/remote-json-jsonp/" target="_blank">這裡</a>。</p>
<h4>Global event</h4>
<p>（在看這一段之前，要先認識 jQuery event 的 bind/trigger 才比較能瞭解）</p>
<p>當 Ajax request 產生時，如果你希望網頁上其它的元件能根據 Ajax 進行中不同的流程而做些動作的話，jQuery 已經定義好了一組 event handlers (見文件中的 ajaxXXXX)。而在 jQuery.ajax 函式中，如果 <code>global</code>
 參數設為 true 的時候（預設就是 true），它會在 ajax 的流程中，適時去 trigger 這些 
event，如果有網頁元件使用這些函式來 bind 住這些 event 的話，就會去呼叫設定的 callback function。而它 
trigger 的順序為：</p>
<blockquote><p>ajaxStart » ajaxSend » ajaxSuccess or ajaxError » ajaxComplete » ajaxStop</p></blockquote>
<p>假設我們在按鈕旁加上一個 loading… 的圖案，預設是不顯示，但是當 <code>ajaxStart</code> 的時候把它打開，而在 <code>ajaxComplete</code> 的時候再關閉。先在按鈕後加上：</p>
<p></p><pre><code>
&lt;img src="spinner.gif" style="display:none" id="loading" &gt;
</code></pre><p></p>
<p>然後在 script 中幫 #loading 去 bind 必要的 event:</p>
<p></p><pre><code>
$(document).ready(function(e){
&nbsp;&nbsp;$('#btn').click(showMsg);
&nbsp;&nbsp;$('#loading').ajaxStart(function(e){
&nbsp;&nbsp;&nbsp;&nbsp;$(e.target).show();
&nbsp;&nbsp;});
&nbsp;&nbsp;$('#loading').ajaxComplete(function(e){
&nbsp;&nbsp;&nbsp;&nbsp;$(e.target).hide();
&nbsp;&nbsp;});
});
</code></pre><p></p>
<p>這樣一來，當按鈕按下後建立一個 Ajax request 後，所有 bind ajaxStart event 的元件就會去呼叫定義好的 
callback，而整個 Ajax request 完成後，ajaxComplete event 又會被 trigger。</p>
<p>jQuery/Ajax 部份所提供的 API 真是讓我們減輕不少使用 Ajax 上的負擔，再加上自訂 ajaxXXXX event 的架構，讓你不用把所有的動作擠在同一個 callback function 之中，完全符合 jQuery 的<strong>以網頁元件為中心</strong>的理念。</p>
<p>如果不想每一次使用 ajax 都設定那麼多參數的話，其實 jQuery/Ajax API 還定義了一些快速的函式（如：<code>load</code>, <code>post</code>, <code>getJSON</code>, <code>getScript</code>），一樣是兩三下就完成 ajax 的動作。</p>
			</div><!-- .entry-content -->
	
	<footer class="entry-meta">
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
					<nav class="navigation post-navigation" role="navigation">
		<h1 class="screen-reader-text">Post navigation</h1>
		<div class="nav-links">

			<a href="http://blog.ericsk.org/archives/838" rel="prev"><span class="meta-nav">←</span> jQuery 學習心得筆記 (4) – Ajax (上)</a>			<a href="http://blog.ericsk.org/archives/840" rel="next">收到 NetBeans 6.0 的光碟 <span class="meta-nav">→</span></a>
		</div><!-- .nav-links -->
	</nav><!-- .navigation -->
					
<div id="disqus_thread"><iframe verticalscrolling="no" horizontalscrolling="no" src="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/a.htm" style="width: 100% ! important; border: medium none ! important; overflow: hidden ! important; height: 3031px ! important;" role="complementary" allowtransparency="true" data-disqus-uid="2" id="dsq-2" frameborder="0" scrolling="no" width="100%"></iframe></div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://blog.ericsk.org/archives/839';
    var disqus_identifier = '839 http://blog.ericsk.org/archives/839';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'ericsk';
    var disqus_title = "jQuery 學習心得筆記 (5) &#8211; Ajax (下)";
        var disqus_config = function () {
        var config = this; // Access to the config object
        config.language = '';

        /*
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            var script = document.createElement('script');
            script.async = true;
            script.src = '?cf_action=sync_comments&post_id=839';

            var firstScript = document.getElementsByTagName( "script" )[0];
            firstScript.parentNode.insertBefore(script, firstScript);
        });
                    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
            {
                'author_name':    "[jQuery] AJAX 學習筆記 (一) 如何使用 JSON 驗證使用者表單 | 小惡魔 - 電腦技術 - 生活日記 - 美食介紹 - AppleBOY",
                'author_url':    "http:\/\/blog.wu-boy.com\/2008\/09\/22\/412\/",
                'date':            "09\/22\/2008 12:14 PM",
                'excerpt':        "[...] 參考網站： PHP::JSON in PHP http:\/\/visualjquery.com\/1.1.2.html jQuery 學習心得筆記 (4) - Ajax (上) jQuery 學習心得筆記 (5) - Ajax (下) [...] ",
                'type':            "pingback"            }
        ],
        'trackback_url': "http:\/\/blog.ericsk.org\/archives\/839\/trackback"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.' + 'disqus.com' + '/embed.js?pname=wordpress&pver=2.74';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

			
		</div><!-- #content -->
	</div><!-- #primary -->


		</div><!-- #main -->
		<footer id="colophon" class="site-footer" role="contentinfo">
			
			<div class="site-info">
								<a href="http://wordpress.org/" title="Semantic Personal Publishing Platform">Proudly powered by WordPress</a>
			</div><!-- .site-info -->
		</footer><!-- #colophon -->
	</div><!-- #page -->

	    <script type="text/javascript">
    // <![CDATA[
        var disqus_shortname = 'ericsk';
        (function () {
            var nodes = document.getElementsByTagName('span');
            for (var i = 0, url; i < nodes.length; i++) {
                if (nodes[i].className.indexOf('dsq-postid') != -1) {
                    nodes[i].parentNode.setAttribute('data-disqus-identifier', nodes[i].getAttribute('rel'));
                    url = nodes[i].parentNode.href.split('#', 1);
                    if (url.length == 1) url = url[0];
                    else url = url[1]
                    nodes[i].parentNode.href = url + '#disqus_thread';
                }
            }
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + 'disqus.com/forums/' + disqus_shortname + '/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    //]]>
    </script>
	<div style="display:none">
	</div>
<script type="text/javascript" src="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/devicepx-jetpack.js"></script>
<script type="text/javascript" src="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/gprofiles.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type="text/javascript" src="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/wpgroho.js"></script>
<script type="text/javascript" src="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/functions.js"></script>

	<script src="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/e-201350.js" type="text/javascript"></script>
	<script type="text/javascript">
	st_go({v:'ext',j:'1:2.6.1',blog:'1075063',post:'839',tz:'8'});
	var load_cmc = function(){linktracker_init(1075063,839,2);};
	if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
	else load_cmc();
	</script><img scale="0" id="wpstats" src="jQuery%20%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98%20%285%29%20%E2%80%93%20Ajax%20%28%E4%B8%8B%29%20_%20ericsk.net_files/g.gif" alt="">
<iframe style="position: absolute; width: 1px; height: 1px; top: 0px; left: 0px; visibility: hidden;"></iframe><sfmsg data="{&quot;imageCount&quot;:0,&quot;ip&quot;:&quot;1.1.1.1&quot;}" id="sfMsgId"></sfmsg></body></html>